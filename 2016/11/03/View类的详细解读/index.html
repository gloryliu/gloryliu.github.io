<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  
  <title>View类的详细解读</title>
  <meta name="author" content="liu">
   <meta name="description" content="static class ListenerInfo {        /**
     * 焦点改变监听器
     * This field should be made private, so it is hidden from the SDK.
     * {@hide}
     */
 ">
  

  <meta property="og:title" content="View类的详细解读"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="柳树的个人博客"/>
 <meta property="og:image" content="undefined"/>
  
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="柳树的个人博客" type="application/atom+xml">
  <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>

<body>
  <a id="top"></a>
  <div id='wx_pic' style='display:none;'><img src='/wx_share.png'/></div>
  <div id="main">
    <div class="behind">
      <div class="back">
        <a href="/" class="black-color"><i class="fa fa-times" aria-hidden="true"></i></a>
      </div>
      <div class="description">
        &nbsp;记录学习笔记
      </div>
    </div>
    <div class="container">
      

  <article class="standard android">
    <div class="title">
      
  
    <h1 class="page-title center">
        View类的详细解读
    </h1>
  


    </div>
    <div class="meta center">
      
<time datetime="2016-11-03T06:10:47.000Z">
  <i class="fa fa-calendar"></i>&nbsp;
  2016-11-03
</time>







    </div>
    <hr>
    <div class="picture-container">
      
    </div>
    <p>static class ListenerInfo {<br>        /**</p>
<pre><code>     * 焦点改变监听器
     * This field should be made private, so it is hidden from the SDK.
     * {@hide}
     */
    protected OnFocusChangeListener mOnFocusChangeListener;

    /**
     * 布局改变监听器
     */
    private ArrayList&lt;OnLayoutChangeListener&gt; mOnLayoutChangeListeners;

    /**
     * 滑动监听器
     */
    protected OnScrollChangeListener mOnScrollChangeListener;

    /**
     * Listeners for attach events.
     */
    private CopyOnWriteArrayList&lt;OnAttachStateChangeListener&gt; mOnAttachStateChangeListeners;

    /**
     * 点击事件监听器
     * This field should be made private, so it is hidden from the SDK.
     * {@hide}
     */
    public OnClickListener mOnClickListener;

    /**
     * 长按监听器
     * This field should be made private, so it is hidden from the SDK.
     * {@hide}
     */
    protected OnLongClickListener mOnLongClickListener;

    /**
     * Listener used to dispatch context click events. This field should be made private, so it
     * is hidden from the SDK.
     * {@hide}
     */
    protected OnContextClickListener mOnContextClickListener;

    /**
     * Listener used to build the context menu.
     * This field should be made private, so it is hidden from the SDK.
     * {@hide}
     */
    protected OnCreateContextMenuListener mOnCreateContextMenuListener;

    private OnKeyListener mOnKeyListener;

    private OnTouchListener mOnTouchListener;

    private OnHoverListener mOnHoverListener;

    private OnGenericMotionListener mOnGenericMotionListener;

    private OnDragListener mOnDragListener;

    private OnSystemUiVisibilityChangeListener mOnSystemUiVisibilityChangeListener;

    OnApplyWindowInsetsListener mOnApplyWindowInsetsListener;
}  

/**
 * Creates an image that the system displays during the drag and drop
 * operation. This is called a &amp;quot;drag shadow&amp;quot;. The default implementation
 * for a DragShadowBuilder based on a View returns an image that has exactly the same
 * appearance as the given View. The default also positions the center of the drag shadow
 * directly under the touch point. If no View is provided (the constructor with no parameters
 * is used), and {@link #onProvideShadowMetrics(Point,Point) onProvideShadowMetrics()} and
 * {@link #onDrawShadow(Canvas) onDrawShadow()} are not overridden, then the
 * default is an invisible drag shadow.
 * &lt;p&gt;
 * You are not required to use the View you provide to the constructor as the basis of the
 * drag shadow. The {@link #onDrawShadow(Canvas) onDrawShadow()} method allows you to draw
 * anything you want as the drag shadow.
 * &lt;/p&gt;
 * &lt;p&gt;
 *  You pass a DragShadowBuilder object to the system when you start the drag. The system
 *  calls {@link #onProvideShadowMetrics(Point,Point) onProvideShadowMetrics()} to get the
 *  size and position of the drag shadow. It uses this data to construct a
 *  {@link android.graphics.Canvas} object, then it calls {@link #onDrawShadow(Canvas) onDrawShadow()}
 *  so that your application can draw the shadow image in the Canvas.
 * &lt;/p&gt;
 *
 * &lt;div class=&quot;special reference&quot;&gt;
 * &lt;h3&gt;Developer Guides&lt;/h3&gt;
 * &lt;p&gt;For a guide to implementing drag and drop features, read the
 * &lt;a href=&quot;{@docRoot}guide/topics/ui/drag-drop.html&quot;&gt;Drag and Drop&lt;/a&gt; developer guide.&lt;/p&gt;
 * &lt;/div&gt;
 */
public static class DragShadowBuilder {
    private final WeakReference&lt;View&gt; mView;

    /**
     * Constructs a shadow image builder based on a View. By default, the resulting drag
     * shadow will have the same appearance and dimensions as the View, with the touch point
     * over the center of the View.
     * @param view A View. Any View in scope can be used.
     */
    public DragShadowBuilder(View view) {
        mView = new WeakReference&lt;View&gt;(view);
    }

    /**
     * Construct a shadow builder object with no associated View.  This
     * constructor variant is only useful when the {@link #onProvideShadowMetrics(Point, Point)}
     * and {@link #onDrawShadow(Canvas)} methods are also overridden in order
     * to supply the drag shadow&apos;s dimensions and appearance without
     * reference to any View object. If they are not overridden, then the result is an
     * invisible drag shadow.
     */
    public DragShadowBuilder() {
        mView = new WeakReference&lt;View&gt;(null);
    }

    /**
     * Returns the View object that had been passed to the
     * {@link #View.DragShadowBuilder(View)}
     * constructor.  If that View parameter was {@code null} or if the
     * {@link #View.DragShadowBuilder()}
     * constructor was used to instantiate the builder object, this method will return
     * null.
     *
     * @return The View object associate with this builder object.
     */
    @SuppressWarnings({&quot;JavadocReference&quot;})
    final public View getView() {
        return mView.get();
    }

    /**
     * Provides the metrics for the shadow image. These include the dimensions of
     * the shadow image, and the point within that shadow that should
     * be centered under the touch location while dragging.
     * &lt;p&gt;
     * The default implementation sets the dimensions of the shadow to be the
     * same as the dimensions of the View itself and centers the shadow under
     * the touch point.
     * &lt;/p&gt;
     *
     * @param outShadowSize A {@link android.graphics.Point} containing the width and height
     * of the shadow image. Your application must set {@link android.graphics.Point#x} to the
     * desired width and must set {@link android.graphics.Point#y} to the desired height of the
     * image.
     *
     * @param outShadowTouchPoint A {@link android.graphics.Point} for the position within the
     * shadow image that should be underneath the touch point during the drag and drop
     * operation. Your application must set {@link android.graphics.Point#x} to the
     * X coordinate and {@link android.graphics.Point#y} to the Y coordinate of this position.
     */
    public void onProvideShadowMetrics(Point outShadowSize, Point outShadowTouchPoint) {
        final View view = mView.get();
        if (view != null) {
            outShadowSize.set(view.getWidth(), view.getHeight());
            outShadowTouchPoint.set(outShadowSize.x / 2, outShadowSize.y / 2);
        } else {
            Log.e(View.VIEW_LOG_TAG, &quot;Asked for drag thumb metrics but no view&quot;);
        }
    }

    /**
     * Draws the shadow image. The system creates the {@link android.graphics.Canvas} object
     * based on the dimensions it received from the
     * {@link #onProvideShadowMetrics(Point, Point)} callback.
     *
     * @param canvas A {@link android.graphics.Canvas} object in which to draw the shadow image.
     */
    public void onDrawShadow(Canvas canvas) {
        final View view = mView.get();
        if (view != null) {
            view.draw(canvas);
        } else {
            Log.e(View.VIEW_LOG_TAG, &quot;Asked to draw drag shadow but no view&quot;);
        }
    }
}

    public interface OnDragListener {
    /**
     * Called when a drag event is dispatched to a view. This allows listeners
     * to get a chance to override base View behavior.
     * 
     * @param v The View that received the drag event.被拖动的view
     * @param event The {@link android.view.DragEvent} object for the drag event. 拖动中遇到的view
     * @return {@code true} if the drag event was handled successfully, or {@code false}
     * if the drag event was not handled. Note that {@code false} will trigger the View
     * to call its {@link #onDragEvent(DragEvent) onDragEvent()} handler.
     */
    boolean onDrag(View v, DragEvent event);
}
DragEvent拖动期间会有以下状态变化：
switch (event.getAction()) {
            case DragEvent.ACTION_DRAG_STARTED:
                //开始拖拽
                Log.d(Tag,&quot;ACTION_DRAG_STARTED&quot;);
                break;
            case DragEvent.ACTION_DRAG_ENTERED:
                //拖拽进入一个view
                Log.d(Tag,&quot;ACTION_DRAG_ENTERED&quot;);
                break;
            case DragEvent.ACTION_DRAG_EXITED:
                //拖拽从进入的view出来
                Log.d(Tag,&quot;ACTION_DRAG_EXITED&quot;);
                break;
            case DragEvent.ACTION_DROP:
                //松开手并且进入view的时候才执行
                Log.d(Tag,&quot;ACTION_DROP&quot;);
                break;
            case DragEvent.ACTION_DRAG_ENDED:
                //拖拽结束
                Log.d(Tag,&quot;ACTION_DRAG_ENDED&quot;);
                break;
            default:
                break;
        }
</code></pre>

  </article>
  </script>
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>




    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot container">
    <div class="firstrow">
        <a href="#top" target="_self">
        <i class="fa fa-arrow-right"></i>
        </a>
        Copyright © 1999-2017
    </div>
    <div class="secondrow">
        <a href="http://www.liu1024.me/">
        liu
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
